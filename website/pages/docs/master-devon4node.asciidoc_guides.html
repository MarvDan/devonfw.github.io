<!DOCTYPE html><html lang="en"><head><style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Uncomment @import statement below to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
*:not(pre)>code.nobreak{word-wrap:normal}
*:not(pre)>code.nowrap{white-space:nowrap}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote::before{display:none}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{word-spacing:0;line-height:1.6}
.quoteblock.abstract blockquote::before,.quoteblock.abstract p::before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd){background:#f8f8f7}
table.stripes-none tr,table.stripes-odd tr:nth-of-type(even){background:none}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style><style>.toc-current{font-weight: bold;} .toc-root{font-family: "Open Sans","DejaVu Sans",sans-serif;
                       font-size: 0.9em;} #content{display: flex; flex-direction: column; flex: 1 1 auto;}
             .nav-footer{text-align: center; margin-top: auto;}
             .nav-footer > p > a {white-space: nowrap;}</style>
<meta http-equiv="Content-Type" content="text/html; charset=">
<meta name="generator" content="Asciidoctor 1.5.8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="author" content="Updated at 2021-06-30 12:30:42 UTC">

<!-- ******** SOCIAL MEDIA META ********** -->

<meta name="title" property="og:title" content="devonfw website">
<meta property="og:type" content="website">
<meta name="image" property="og:image" content="https://devonfw.com/images/devonfwwebsite.png">
<meta name="description" property="og:description" content="devonfw is the standard open source software development platform; Serving the full Software Delivery Life Cycle.">
<meta property="og:url" content="https://devonfw.com/index.html">

<meta name="twitter:title" content="devonfw website">
<meta name="twitter:description" content="devonfw is the standard open source software development platform; Serving the full Software Delivery Life Cycle.">
<meta name="twitter:image" content="https://devonfw.com/images/devonfwwebsite.png">
<meta name="twitter:card" content="summary_large_image">

<!-- ************************************* -->


<title>devonfw guide</title>
<!-- devonfw website stylesheet -->
<link rel="stylesheet" type="text/css" href="/devonfw.css">
<!-- Lunr -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/lunr.js/2.3.6/lunr.min.js" integrity="sha256-M/Awbb/BYh+Rh0aGjpQid26p1b2OBsrk2k9yAvQxPV0=" crossorigin="anonymous"></script>
<!-- JQuery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/7.4/styles/googlecode.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/7.4/highlight.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/7.4/lang/common.min.js"></script>
<script>hljs.initHighlightingOnLoad()</script>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

<script src="https://cdn.jsdelivr.net/npm/anchor-js/anchor.min.js"></script>

<!-- ************** Google analytics ************ -->

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-151636804-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-151636804-1');
</script>

<!-- ******************************************** -->

</head>
<body id="master.asciidoc" class="book toc2 toc-left">
<div id="website-navbar" class="website-navbar">
<button id="menu-button" class="menu-button">
  <img src="/images/menu-button.svg" width="32px" height="32px" alt>
</button>

<ul>
<li>
<p><span class="image"><a class="image" href="/website/pages/welcome/welcome.html"><img alt="logo" src="/images/Logo_devonfw.svg"></a></span></p>
</li>
<li>
<p><a href="/website/pages/explore/explore.html">EXPLORE</a></p>
</li>
<li>
<p><a href="/website/pages/docs/master.html" class="active">DOCS</a></p>
</li>
</ul>

<form class="form-inline">
  <div class="search-bar">
    <input id="search-field" type="search" class="form-control mr-sm-2" placeholder="Search by keyword(s)..." aria-label="Search" style="height: auto;">
    <div class="sb-res-pos px-4">
      <div id="click-outside" class="click-outside z-50 hidden"></div>
      <div class="col rounded px-0 border z-100 bg-white hidden search-bar-results" id="search-results-box">
      </div>
    </div>
  </div>
</form>
<a class="navbar-github text-white" href="https://github.com/devonfw/">
  <img src="/images/github-mark.png" width="auto" height="auto" alt>
</a></div>
<div id="sidebar" class="wiki-sidebar"></div>

<div id="header">
<h1>devonfw guide</h1>
<div class="details">
<span id="author" class="author">Updated at 2021-06-30 12:31:06 UTC</span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<p><span class="toc-root"><a href="master.html">devonfw guide</a></span></p><ul class="sectlevel0">
<li><a href="getting-started.asciidoc.html">I. Getting Started</a>
</li>
<li><a href="devonfw-ide.asciidoc.html">II. devonfw-ide</a>
</li>
<li><a href="devon4j.asciidoc.html">III. devonfw for Java (devon4j)</a>
</li>
<li><a href="master-devon4ng.asciidoc.html">IV. devon4ng</a>
</li>
<li><a href="master-devon4net.asciidoc.html">V. devon4net</a>
</li>
<li><a href="master-devon4node.asciidoc.html">VI. devon4node</a>
<ul class="sectlevel1">
<li><a href="devon4node-architecture.asciidoc.html">32. devon4node Architecture</a>
</li>
<li><a href="master-devon4node.asciidoc_layers.html">33. Layers</a>
</li>
<li><a href="master-devon4node.asciidoc_guides.html"><span class="toc-current">34. Guides</span></a>
<ul class="sectlevel2">
<li><a href="master-devon4node.asciidoc_guides.html#guides-key-principles.asciidoc">34.1. Key Principles</a>
</li>
<li><a href="master-devon4node.asciidoc_guides.html#guides-code-generation.asciidoc">34.2. Code Generation</a>
</li>
<li><a href="master-devon4node.asciidoc_guides.html#guides-coding-conventions.asciidoc">34.3. Coding Conventions</a>
</li>
<li><a href="master-devon4node.asciidoc_guides.html#guides-dependency-injection.asciidoc">34.4. Dependency Injection</a>
</li>
<li><a href="master-devon4node.asciidoc_guides.html#guides-configuration-module.asciidoc">34.5. Configuration Module</a>
</li>
<li><a href="master-devon4node.asciidoc_guides.html#guides-auth-jwt.asciidoc">34.6. Auth JWT module</a>
</li>
<li><a href="master-devon4node.asciidoc_guides.html#guides-swagger.asciidoc">34.7. Swagger</a>
</li>
<li><a href="master-devon4node.asciidoc_guides.html#guides-typeorm.asciidoc">34.8. TypeORM</a>
</li>
<li><a href="master-devon4node.asciidoc_guides.html#guides-serializer.asciidoc">34.9. Serializer</a>
</li>
<li><a href="master-devon4node.asciidoc_guides.html#guides-validation.asciidoc">34.10. Validation</a>
</li>
<li><a href="master-devon4node.asciidoc_guides.html#guides-logger.asciidoc">34.11. Logger</a>
</li>
<li><a href="master-devon4node.asciidoc_guides.html#guides-mailer.asciidoc">34.12. Mailer Module</a>
</li>
<li><a href="master-devon4node.asciidoc_guides.html#guides-eslint-sonarqube-config.asciidoc">34.13. Importing your ESLint reports into SonarQube</a>
</li>
</ul>
</li>
<li><a href="master-devon4node.asciidoc_devon4node-applications.html">35. devon4node applications</a>
</li>
</ul>
</li>
<li><a href="master-database.asciidoc.html">VII. Choosing your Database</a>
</li>
<li><a href="master-devonfw-shop-floor.asciidoc.html">VIII. devonfw shop floor</a>
</li>
<li><a href="master-cicdgen.asciidoc.html">IX. cicdgen</a>
</li>
<li><a href="master-production-line.asciidoc.html">X. Production Line Templates</a>
</li>
<li><a href="master-cobigen.asciidoc.html">XI. CobiGen&#x2009;&#x2014;&#x2009;Code-based incremental Generator</a>
</li>
<li><a href="master-mrchecker.asciidoc.html">XII. MrChecker - devonfw testing tool</a>
</li>
<li><a href="master-my-thai-star.asciidoc.html">XIII. MyThaiStar</a>
</li>
<li><a href="master-dashboard.asciidoc.html">XIV. devonfw dashboard</a>
</li>
<li><a href="master-solicitor.asciidoc.html">XV. Solicitor User Guide</a>
</li>
<li><a href="master-contributing.asciidoc.html">XVI. Contributing</a>
</li>
<li><a href="master-release-notes.asciidoc.html">XVII. Release Notes</a>
</li>
</ul>
</div>
</div><div id="content">
<div class="sect1">
<h2 id="master-devon4node.asciidoc_guides">34. Guides</h2>
<div class="sectionbody">
<!-- toc disabled -->
<div class="sect2">
<h3 id="guides-key-principles.asciidoc">34.1. Key Principles</h3>
<div class="paragraph">
<p>devon4node is built following some basic principles like:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://en.wikipedia.org/wiki/SOLID">SOLID</a></p>
</li>
<li>
<p><a href="https://en.wikipedia.org/wiki/Software_design_pattern">Patterns</a></p>
</li>
<li>
<p><a href="https://en.wikipedia.org/wiki/Open-source_model">Open</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>But key principles that best define devon4node (and are inherited from NestJS) are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Simplicity (aka <a href="https://en.wikipedia.org/wiki/KISS_principle">KISS</a>)</p>
</li>
<li>
<p>Reusability</p>
</li>
<li>
<p>Productivity</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="guides-key-principles.asciidoc_simplicity">34.1.1. Simplicity</h4>
<div class="paragraph">
<p>In devon4node we tried to do everything as simple as possible. Following this principle we will be able to do easy to maintain applications.</p>
</div>
<div class="paragraph">
<p>For example, in order to expose all CRUD operations for an entity, you only need to create a controller like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-typescript" data-lang="typescript">@Crud({
  model: {
    type: Employee,
  },
})
@CrudType(Employee)
@Controller(&apos;employee/employees&apos;)
export class EmployeeCrudController {
  constructor(public service: EmployeeCrudService) {}
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can find this code in the <a href="master-devon4net.asciidoc_samples.html#samples.asciidoc">employee example</a>. Only with this code your exposing the full CRUD operations for the employee entity. As you can see, it&#x2019;s an empty class with some decorators and the <code>EmployeeCrudService</code> injected as dependency. Simple, isn&#x2019;t it? The <code>EmployeeCrudService</code> is also simple:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-typescript" data-lang="typescript">@Injectable()
export class EmployeeCrudService extends TypeOrmCrudService&lt;Employee&gt; {
  constructor(@InjectRepository(Employee) repo: Repository&lt;Employee&gt;) {
    super(repo);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Another empty class which extends from <code>TypeOrmCrudService&lt;Employee&gt;</code> and injects the Employee Repository as dependency. Nothing else.</p>
</div>
<div class="paragraph">
<p>With these examples you can get an idea of how simple it can be to code a devon4node application .</p>
</div>
</div>
<div class="sect3">
<h4 id="guides-key-principles.asciidoc_reusability">34.1.2. Reusability</h4>
<div class="paragraph">
<p>NestJS (and devon4node) applications are designed in a modular way. This allows you to isolate some functionality in a module, and then reuse it in every application that you need. This is the same behaviour that Angular has. You can see it in the NestJS modules like <a href="https://github.com/nestjs/typeorm">TypeORM</a>, <a href="https://github.com/nestjs/swagger">Swagger</a> and others. Also, in devon4node we have the <a href="https://www.npmjs.com/package/@devon4node/mailer">Mailer module</a>.</p>
</div>
<div class="paragraph">
<p>In your applications, you only need to import those modules and then you will be able to use the functionality that they implement. Example</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-typescript" data-lang="typescript">@Module({
  imports: [ AuthModule, ConfigurationModule ],
})
export class SomeModule {}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="guides-key-principles.asciidoc_productivity">34.1.3. Productivity</h4>
<div class="paragraph">
<p>devon4node is designed to create secure enterprise applications. But also, it allow you to do it in a fast way. To increase the productivity devon4node, devon4node provide schematics in order to generate some boilerplate code.</p>
</div>
<div class="paragraph">
<p>For example, to create a module you need to create a new file for a module (or copy it) and write the code, then you need to import it in the AppModule. This is a easy example, but you can introduce some errors: forget to import it in the AppModule, introduce errors with the copy/paste and so on. By using the command <code>nest g module --name &lt;module-name&gt;</code> it will do everything for you. Just a simple command. In this specific case probably you do not see any advantage, but there are other complex cases where you can generate more complex code with nest and devon4node schematics command.</p>
</div>
<div class="paragraph">
<p>See <a href="master-devon4node.asciidoc_guides.html#guides-code-generation.asciidoc">code generation</a> in order to know how to increase your productivity creating devon4node applications.</p>
</div>
<!-- toc disabled -->
</div>
</div>
<div class="sect2">
<h3 id="guides-code-generation.asciidoc">34.2. Code Generation</h3>
<div class="paragraph">
<p>As we mention in the page <a href="#guide-key-principles.asciidoc">key principles</a>, one of our key principles is Productivity. In order to provide that productivity, we have some tools to generate code. These tools will help you generate the common parts of the application so that you can focus only on the specific functionality.</p>
</div>
<div class="paragraph">
<p>Those tools are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://www.npmjs.com/package/@devon4node/schematics">devon4node schematics through Nest CLI</a></p>
</li>
<li>
<p><a href="https://github.com/devonfw/cobigen">CobiGen</a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="guides-code-generation.asciidoc_nest-cli-and-devon4node-schematics">34.2.1. Nest CLI and Devon4node schematics</h4>
<div class="paragraph">
<p>We are going to use the Nest CLI to generate code of our application, you can know more about NodeJs CLI in the official <a href="https://docs.nestjs.com/cli/overview:">documentation</a>.</p>
</div>
<div class="sect4">
<h5 id="guides-code-generation.asciidoc_install-devon4node-schematics">Install devon4node schematics</h5>
<div class="paragraph">
<p>First of all, you need to install Nest CLI</p>
</div>
<div class="paragraph">
<p>Execute the command <code>yarn global add @nestjs/cli</code>.
You can also use npm: <code>npm install -g @nestjs/cli</code></p>
</div>
<div class="paragraph">
<p>And then Devon4node schematics globally with the following command:</p>
</div>
<div class="paragraph">
<p><code>yarn global add @devon4node/schematics</code> or <code>npm install -g @devon4node/schematics</code></p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>If you get an error trying execute any devon4node schematic related to collection not found, try to reinstall devon4node/schematics on the project folder or be sure that schematics folder is inside @devon4node in node_modules.
<code>yarn add @devon4node/schematics</code></p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect4">
<h5 id="guides-code-generation.asciidoc_generate-new-devon4node-application">Generate new devon4node application</h5>
<div class="paragraph">
<p>To start creating a devon4node application, execute the command:</p>
</div>
<div class="paragraph">
<p><code>nest g -c @devon4node/schematics application [application-name]</code></p>
</div>
<div class="paragraph">
<p>If you do not put a name, the command line will ask you for one.</p>
</div>
</div>
<div class="sect4">
<h5 id="guides-code-generation.asciidoc_generate-code-for-typeorm">Generate code for Typeorm</h5>
<div class="paragraph">
<p>Initialize typeorm into your current project in a correct way.</p>
</div>
<div class="paragraph">
<p><code>nest g -c @devon4node/schematics typeorm</code></p>
</div>
<div class="paragraph">
<p>Then, you will be asked about which DB you want to use.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/typeorm-schematic.PNG" alt="typeorm schematic"></span></p>
</div>
</div>
<div class="sect4">
<h5 id="guides-code-generation.asciidoc_generate-crud">Generate CRUD</h5>
<div class="paragraph">
<p>Generate CRUD methods for a entity. Requires TypeORM installed in the project.</p>
</div>
<div class="paragraph">
<p>It will add the @nestjsx/crud module as a project dependency. Then, generates an entity, a CRUD controller and a CRUD service. It also register the entity, controller and service in the module.</p>
</div>
<div class="paragraph">
<p>Execute <code>nest g -c @devon4node/schematics crud</code> and then you will need to write a name for the crud.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/crud-schematic.PNG" alt="crud schematic">
</div>
</div>
</div>
<div class="sect4">
<h5 id="guides-code-generation.asciidoc_generate-typeorm-entity">Generate Typeorm entity</h5>
<div class="paragraph">
<p>Add a TypeOrm entity to your project. Requires TypeORM installed in the project.</p>
</div>
<div class="paragraph">
<p>Execute <code>nest g -c @devon4node/schematics entity</code> and you will be asked for an entity name.</p>
</div>
</div>
<div class="sect4">
<h5 id="guides-code-generation.asciidoc_add-config-module">Add config-module</h5>
<div class="paragraph">
<p>Add the config module to the project.</p>
</div>
<div class="paragraph">
<p>It will add the @devon4node/common module as a project dependency. Then, it will generate the configuration module into your project and add it in the core module. Also, it generates the config files for the most common environments.</p>
</div>
<div class="paragraph">
<p>The command to execute will be <code>nest g -c @devon4node/schematics config-module</code></p>
</div>
</div>
<div class="sect4">
<h5 id="guides-code-generation.asciidoc_add-mailer-module">Add mailer module</h5>
<div class="paragraph">
<p>Add @devon4node/mailer module to project.</p>
</div>
<div class="paragraph">
<p>It will add the @devon4node/mailer module as a project dependency. Also, it will add it to the core module and it will generate some email template examples.</p>
</div>
<div class="paragraph">
<p>Write the command <code>nest g -c @devon4node/schematics mailer</code></p>
</div>
</div>
<div class="sect4">
<h5 id="guides-code-generation.asciidoc_add-swagger-module">Add swagger module</h5>
<div class="paragraph">
<p>Add swagger module to project.</p>
</div>
<div class="paragraph">
<p>It will add the @nestjs/swagger module as a project dependency. Also, it will update the main.ts file in order to expose the endpoint for swagger. The default endpoint is: /v1/api</p>
</div>
<div class="paragraph">
<p>Execute the command <code>nest g -c @devon4node/schematics swagger</code></p>
</div>
</div>
<div class="sect4">
<h5 id="guides-code-generation.asciidoc_add-auth-jwt-module">Add auth-jwt module</h5>
<div class="paragraph">
<p>Add the auth JWT module to the project.</p>
</div>
<div class="paragraph">
<p>It will add to your project the auth-jwt and user module. Also, it will import those modules into the core module.</p>
</div>
<div class="paragraph">
<p>Execute <code>nest g -c @devon4node/schematics auth-jwt</code></p>
</div>
</div>
<div class="sect4">
<h5 id="guides-code-generation.asciidoc_add-security">Add security</h5>
<div class="paragraph">
<p>Add cors and helmet to your project.</p>
</div>
<div class="paragraph">
<p>It will add helmet package as project dependency and update the main.ts file in order to enable the cors and helmet in your application.</p>
</div>
<div class="paragraph">
<p>Execute <code>nest g -c @devon4node/schematics security</code></p>
</div>
</div>
<div class="sect4">
<h5 id="guides-code-generation.asciidoc_generate-database-migrations">Generate database migrations</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Generate database migrations</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>In order to create migration scripts with typeorm, you need to install ts-node: <code>yarn global add ts-node</code> or <code>npm i -g ts-node</code></p>
</li>
<li>
<p>Generate the tables creation migration: <code>yarn run typeorm migration:generate -n CreateTables</code></p>
<div class="imageblock">
<div class="content">
<img src="images/insert-data.PNG" alt="insert data">
</div>
</div>
<div class="paragraph">
<p>It will connect to the database, read all entities and then it will generate a migration file with all sql queries need to transform the current status of the database to the status defined by the entities. If the database is empty, it will generate all sql queries need to create all tables defined in the entities. You can find a example in the todo example</p>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>As typeorm is the tool used for DB. You can check official documentation for more information.
See <a href="https://typeorm.io/#/using-cli">typeorm CLI documentation</a>.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="guides-code-generation.asciidoc_cobigen">34.2.2. CobiGen</h4>
<div class="paragraph">
<p>Currently, we do not have templates to generate devon4node code (we have planned to do that in the future). Instead, we have templates that read the code of a devon4node application and generate a devon4ng application. Visit the <a href="https://github.com/devonfw/cobigen">CobiGen</a> page for more information.</p>
</div>
<!-- toc disabled -->
</div>
</div>
<div class="sect2">
<h3 id="guides-coding-conventions.asciidoc">34.3. Coding Conventions</h3>
<div class="paragraph">
<p>devon4node defines some coding conventions in order to improve the readability, reduce the merge conflicts and be able to develop applications in an industrialized way.</p>
</div>
<div class="paragraph">
<p>In order to ensure that you are following the devon4node coding conventions, you can use the following tools:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>ESLint</code>: <a href="https://eslint.org/">ESLint</a> ESLint is a tool for identifying and reporting on patterns found in ECMAScript/JavaScript code, with the goal of making code more consistent and avoiding bugs. We recommend to use the <a href="https://marketplace.visualstudio.com/items?itemName=dbaeumer.vscode-eslint">ESLint VSCode extension</a> (included in the devonfw Platform Extension Pack) in order to be able to see the linting errors while you are developing.</p>
</li>
<li>
<p><code>Prettier</code>: <a href="https://prettier.io/">Prettier</a> is a code formatter. We recommend to use the Prettier VSCode extension (included in the devonfw Platform Extension Pack) and enable the <code>editor.formatOnSave</code> option.</p>
</li>
<li>
<p><code>devon4node application schematic</code>: this tool will generate code follwing the devon4node coding conventions. Also, when you generate a new project using the devon4node application schematic, it generates the configuration files for TSLint and Prettier that satisfy the devon4node coding conventions.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When you combine all tools, you can be sure that you follow the devon4node coding conventions.</p>
</div>
<div class="sect3">
<h4 id="guides-coding-conventions.asciidoc_detailed-devon4node-coding-conventions">34.3.1. Detailed devon4node Coding Conventions</h4>
<div class="paragraph">
<p>Here we will detail some of most important devon4node coding conventions. To be sure that you follows all devon4node coding conventions use the tools described before.</p>
</div>
<div class="sect4">
<h5 id="guides-coding-conventions.asciidoc_indentation">Indentation</h5>
<div class="paragraph">
<p>All devon4node code files must be indented using spaces. The indentation with must be 2 spaces.</p>
</div>
</div>
<div class="sect4">
<h5 id="guides-coding-conventions.asciidoc_white-space">White space</h5>
<div class="paragraph">
<p>In order to improve the readability of your code, you must introduce whitespaces. Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-typescript" data-lang="typescript">if(condition){</code></pre>
</div>
</div>
<div class="paragraph">
<p>must be</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-typescript" data-lang="typescript">if (condition) {</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="guides-coding-conventions.asciidoc_naming-conventions">Naming conventions</h5>
<div class="sect5">
<h6 id="guides-coding-conventions.asciidoc_file-naming">File naming</h6>
<div class="paragraph">
<p>The file name must follow the pattern: (name in kebap case).(kind of component).(extension)
The test file name must follow the pattern: (name in kebap case).(kind of component).spec.(extension)</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>auth-jwt.service.ts
auth-jwt.service.spec.ts</pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="guides-coding-conventions.asciidoc_interface-naming">Interface naming</h6>
<div class="paragraph">
<p>The interface names must be in pascal case, and must start with I. There is some controversy in starting the interface names with an I, but we decided to do it because is most of cases you will have an interface and a class with the same name, so, to differentiate them, we decided to start the interfaces with I. Other devonfw stacks solves it by adding the suffix <code>Impl</code> in the class implementations.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>interface ICoffee {}</pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="guides-coding-conventions.asciidoc_class-naming">Class naming</h6>
<div class="paragraph">
<p>The class names must be in pascal case.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>class Coffee {}</pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="guides-coding-conventions.asciidoc_variable-naming">Variable naming</h6>
<div class="paragraph">
<p>All variable names must be in camel case.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>const coffeeList: Coffe[];</pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="guides-coding-conventions.asciidoc_declarations">Declarations</h5>
<div class="paragraph">
<p>For all variable declarations we must use <code>const</code> or <code>let</code>. <code>var</code> is forbidden. We preffer to use <code>const</code> when possible.</p>
</div>
</div>
<div class="sect4">
<h5 id="guides-coding-conventions.asciidoc_programming-practices">Programming practices</h5>
<div class="sect5">
<h6 id="guides-coding-conventions.asciidoc_trailing-comma">Trailing comma</h6>
<div class="paragraph">
<p>All statements must end with a trailing comma. Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-typescript" data-lang="typescript">{
  one: &apos;one&apos;,
  two: &apos;two&apos;  // bad
}
{
  one: &apos;one&apos;,
  two: &apos;two&apos;, // good
}</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="guides-coding-conventions.asciidoc_arrow-functions">Arrow functions</h6>
<div class="paragraph">
<p>All anonymous functions must be definned with the arrow function notation. In most of cases it&#x2019;s not a problem, but sometimes, when you do not want to bind <code>this</code> when you define the function, you can use the other function definition. In this special cases you must disable the linter for those sentence.</p>
</div>
</div>
<div class="sect5">
<h6 id="guides-coding-conventions.asciidoc_comments">Comments</h6>
<div class="paragraph">
<p>Comments must start with a whitespace. Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-typescript" data-lang="typescript">//This is a bad comment
// This is OK</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="guides-coding-conventions.asciidoc_quotemarks">Quotemarks</h6>
<div class="paragraph">
<p>For string definitions, we must use single quotes.</p>
</div>
</div>
<div class="sect5">
<h6 id="guides-coding-conventions.asciidoc_if-statements">if statements</h6>
<div class="paragraph">
<p>In all if statements you always must use brackets. Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-typescript" data-lang="typescript">// Bad if statement
if (condition)
  return true;

// Good if statement
if (condition) {
  return true;
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="guides-coding-conventions.asciidoc_pre-commit-hooks">34.3.2. Pre-commit hooks</h4>
<div class="paragraph">
<p>In order to ensure that your new code follows the coding conventions, devon4node uses by default husky. Husky is a tool that allows you to configure git hooks easly in your project. When you make a <code>git commit</code> in your devon4node project, it will execute two actions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Prettify the staged files</p>
</li>
<li>
<p>Execute the linter in the staged files</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If any action fails, you won&#x2019;t be able to commit your new changes.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
If you want to skip the git hooks, you can do a commit passing the <code>--no-verify</code> flag.
</td>
</tr>
</tbody></table>
</div>
<!-- toc disabled -->
</div>
</div>
<div class="sect2">
<h3 id="guides-dependency-injection.asciidoc">34.4. Dependency Injection</h3>
<div class="paragraph">
<p>The <a href="https://en.wikipedia.org/wiki/Dependency_injection">dependency injection</a> is a well-known common design pattern applied by frameworks in all languages, like <a href="https://spring.io/">Spring</a> in Java, <a href="https://angular.io/">Angular</a> and others. The intention of this page is not to explain how dependency injection works, but instead how it is addressed by NestJS.</p>
</div>
<div class="paragraph">
<p>NestJS resolve the dependency injection in their modules. When you define a provider in a module, it can be injected in all components of the module. By default, those providers are only available in the module where it is defined. The only way to export a module provider to other modules which import it is adding those provider to the export array. You can also reexport modules.</p>
</div>
<div class="sect3">
<h4 id="guides-dependency-injection.asciidoc_inject-dependencies-in-nestjs">34.4.1. Inject dependencies in NestJS</h4>
<div class="paragraph">
<p>In oder to inject a dependency in a NestJS component, you need to declare it in the component constructor. Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-typescript" data-lang="typescript">export class CoffeeController {
  constructor(public readonly conffeeService: CoffeeService) {}
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>NestJS can resolve all dependencies that are defined in the module as provider, and also the dependencies exported by the modules imported. Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-typescript" data-lang="typescript">@Module({
  controllers: [CoffeeController],
  providers: [CoffeeService],
})
export class CoffeeModule {}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Inject dependencies in the constructor is the is the preferred choice, but, sometimes it is not possible. For example, when you are extending another class and want to keep the constructor definition. In this specific cases we can inject dependencies in the class properties. Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-typescript" data-lang="typescript">export class CoffeeController {
  @Inject(CoffeeService)
  private readonly conffeeService: CoffeeService;
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="guides-dependency-injection.asciidoc_dependency-graph">34.4.2. Dependency Graph</h4>
<div class="imageblock">
<div class="content">
<img src="images/plantuml/dependency-injection1.png" alt="dependency injection1">
</div>
</div>
<div class="paragraph">
<p>In the previous image, the Module A can inject dependencies exported by Module B, Module E and Module F. If module B reexport Module C and Module D, they are also accesibles by Module A.</p>
</div>
<div class="paragraph">
<p>If there is a conflict with the injection token, it resolves the provider with less distance with the module. For example: if the modules C and F exports a <code>UserService</code> provider, the Module A will resolve the <code>UserService</code> exported by the Module F, because the distance from Module A to Module F is 1, and the distance from Module A to Module C is 2.</p>
</div>
<div class="paragraph">
<p>When you define a module as global, the dependency injection system is the same. The only difference is now all modules as a link to the global module. For example, if we make the Module C as global the dependency graph will be:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/plantuml/dependency-injection2.png" alt="dependency injection2">
</div>
</div>
</div>
<div class="sect3">
<h4 id="guides-dependency-injection.asciidoc_custom-providers">34.4.3. Custom providers</h4>
<div class="paragraph">
<p>When you want to change the provider name, you can use a NestJS feature called <a href="https://docs.nestjs.com/fundamentals/custom-providers">custom providers</a>. For example, if you want to define a provider called <code>MockUserService</code> with the provider token <code>UserService</code> you can define it like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-typescript" data-lang="typescript">@Module({
  providers: [{
    provide: UserService,
    useValue: MockUserService,
  }],
})</code></pre>
</div>
</div>
<div class="paragraph">
<p>With this, when you inject want to inject UserService as dependency, the MockUserService will be injected.</p>
</div>
<div class="paragraph">
<p>Custom provider token can be also a string:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-typescript" data-lang="typescript">@Module({
  providers: [{
    provide: &apos;USER_SERVICE&apos;,
    useValue: MockUserService,
  }],
})</code></pre>
</div>
</div>
<div class="paragraph">
<p>but now, when you want to inject it as dependency you need to use the @Inject decorator.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-typescript" data-lang="typescript">constructor(@Inject(&apos;USER_SERVICE&apos;) userService: any) {}</code></pre>
</div>
</div>
<!-- toc disabled -->
</div>
</div>
<div class="sect2">
<h3 id="guides-configuration-module.asciidoc">34.5. Configuration Module</h3>
<div class="paragraph">
<p>devon4node provides a way to generate a configuration module inside your appication. To generate it you only need to execute the command <code>nest g -c @devon4node/schematics config-module</code>. This command will generate inside your application:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Configuration module inside the core module.</p>
</li>
<li>
<p>config folder where all environment configuration are stored.</p>
<div class="ulist">
<ul>
<li>
<p>default configuration: configuration for your local development environment.</p>
</li>
<li>
<p>develop environment configuration for the develop environment.</p>
</li>
<li>
<p>uat environment configuration for the uat environment.</p>
</li>
<li>
<p>production environment configuration for the production environment.</p>
</li>
<li>
<p>production environment configuration for the production environment.</p>
</li>
<li>
<p>test environment configuration used by test.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
some code generators will add some properties to this module, so, be sure that the config module is the first module that you generate in your application.
</td>
</tr>
</tbody></table>
</div>
<div class="sect3">
<h4 id="guides-configuration-module.asciidoc_use-the-configuration-service">34.5.1. Use the configuration service</h4>
<div class="paragraph">
<p>To use the configuration service, you only need to inject it as dependency. As configuration module is defined in the core module, it will be available everywhere in your application. Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-typescript" data-lang="typescript">export class MyProvider {
  constructor(public readonly configService: ConfigurationService) {}

  myMethod() {
    return this.confiService.isDev;
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="guides-configuration-module.asciidoc_choose-an-environment-file">34.5.2. Choose an environment file</h4>
<div class="paragraph">
<p>By default, when you use the configuration service it will take the properties defined in the default.ts file. If you want to change the configuration file, you only need to set the NODE_ENV environment property with the name of the desired environment. Examples: in windows execute <code>set NODE_ENV=develop</code> before executing the application, in linux execute <code>NODE_ENV=develop</code> before executing the application or <code>NODE_ENV=develop yarn start</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="guides-configuration-module.asciidoc_override-configuration-properties">34.5.3. Override configuration properties</h4>
<div class="paragraph">
<p>Sometimes, you want to keep some configuration property secure, and you do not want to publish it to the repository, or you want to reuse some configuration file but you need to change some properties. For those scenarios, you can override configuration properties by defining a environment variable with the same name. For example, if you want to override the property host, you can do: <code>set host=&quot;newhost&quot;</code>. It also works with objects. For example, if you want to change the value of secret in the property jwtConfig for <a href="https://github.com/devonfw/devon4node/blob/develop/samples/employee/src/config/develop.ts">this example</a>, you can set a environment variable like this: <code>set jwtConfig=&quot;{&quot;secret&quot;: &quot;newsecret&quot;}&quot;</code>. As you can see, this environment variable has a JSON value. It will take object and merge the jwtConfig property with the properties defined inside the environment variable. It other properties maintain their value. The behaviour is the same for the nested objects.</p>
</div>
</div>
<div class="sect3">
<h4 id="guides-configuration-module.asciidoc_add-a-configuration-property">34.5.4. Add a configuration property</h4>
<div class="paragraph">
<p>In order to add a new property to the configuration module, you need to follow some steps:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Add the property to IConfig interface in <code>src/app/core/configuration/types.ts</code> file. With this, we can ensure that the <code>ConfigurationService</code> and the environment files has those property at compiling time.</p>
</li>
<li>
<p>Add the new property getter to <code>ConfigurationService</code>. You must use the <code>get</code> method of <code>ConfigurationService</code> to ensure that the property will be loaded from the desired config file. You can also add extra logic if needed.</p>
</li>
<li>
<p>Add the property to all config files inside the <code>src/config</code> folder.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="paragraph">
<p>We want to add the property <code>devonfwUrl</code> to our ConfigurationService, so:</p>
</div>
<div class="paragraph">
<p>We add the following code in IConfig interface:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-typescript" data-lang="typescript">devonfwUrl: string;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then, we add the getter in the <code>ConfigurationService</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-typescript" data-lang="typescript">get devonfwUrl(): string {
  return this.get(&apos;devonfwUrl&apos;)!;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Finally, we add the definition in all config files:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-typescript" data-lang="typescript">devonfwUrl: &apos;https://devonfw.com&apos;,</code></pre>
</div>
</div>
<!-- toc disabled -->
</div>
</div>
<div class="sect2">
<h3 id="guides-auth-jwt.asciidoc">34.6. Auth JWT module</h3>
<div class="paragraph">
<p>devon4node provides a way to generate a default authentication module using JWT (JSON Web Token). It uses the <code>@nestjs/passport</code> library descrbe <a href="https://docs.nestjs.com/techniques/authentication">here</a>.</p>
</div>
<div class="paragraph">
<p>To generate the devon4node auth-jwt module you only need to execute the command: <code>nest generate -c @devon4node/schematics auth-jwt</code>. We generate this module inside the applications instead of distributing a npm package because this module is prone to be modified depending on the requirements. It alse generate a basic user module.</p>
</div>
<div class="paragraph">
<p>In this page we will explain the default implementation provided by devon4node. For more information about authentication, JWT, passport and other you can see:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://jwt.io/introduction/">JWT</a></p>
</li>
<li>
<p><a href="https://docs.nestjs.com/techniques/authentication">NestJS authentication</a></p>
</li>
<li>
<p><a href="https://www.npmjs.com/package/passport">Passport</a></p>
</li>
<li>
<p><a href="https://www.npmjs.com/package/passport-jwt">Passport JWT</a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="guides-auth-jwt.asciidoc_auth-jwt-endpoints">34.6.1. Auth JWT endpoints</h4>
<div class="paragraph">
<p>In order to execute authentication operations, the auth-jwt module exposes the following endpoints:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>POST /auth/login</code>: receive an username and a password and return the token in the header if the combination of username and password is correct.</p>
</li>
<li>
<p><code>POST /auth/register</code>: register a new user.</p>
</li>
<li>
<p><code>GET /auth/currentuser</code>: return the user data if he is authenticated.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="guides-auth-jwt.asciidoc_protect-endpoints-with-auth-jwt">34.6.2. Protect endpoints with auth-jwt</h4>
<div class="paragraph">
<p>In order to protect your endpoints with auth-jwt module you only need to add the <code>AuthGuard()</code> in the <code>UseGuards</code> decorator. Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-typescript" data-lang="typescript">@Get(&apos;currentuser&apos;)
@UseGuards(AuthGuard())
currentUser(@Request() req: UserRequest) {
  return req.user;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now, all request to currentuser are protected by the AuthGuard.</p>
</div>
</div>
<div class="sect3">
<h4 id="guides-auth-jwt.asciidoc_role-based-access-control">34.6.3. Role based Access Control</h4>
<div class="paragraph">
<p>The auth-jwt module provides also a way to control the access to some endpoints by using roles. For example, if you want to grant access to a endpoint only to admins, you only need to add the <code>Roles</code> decorator to those endpoints with the roles allowed. Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-typescript" data-lang="typescript">@Get(&apos;currentuser&apos;)
@UseGuards(AuthGuard())
@Roles(roles.ADMIN)
currentUser(@Request() req: UserRequest) {
  return req.user;
}</code></pre>
</div>
</div>
<!-- toc disabled -->
</div>
</div>
<div class="sect2">
<h3 id="guides-swagger.asciidoc">34.7. Swagger</h3>
<div class="paragraph">
<p>We can use swagger (OpenAPI) in order to describe the endpoints that our application exposes.</p>
</div>
<div class="paragraph">
<p>NestJS provides a module which will read the code of our application and will expose one endpoint where we can see the swagger.</p>
</div>
<div class="paragraph">
<p>Add swagger to a devon4node application is simple, you only need to execute the command <code>nest g -c @devon4node/schematics swagger</code> and it will do everything for you. The next time that you start your application, you will be able to see the swagger at <code>/v1/api</code> endpoint.</p>
</div>
<div class="paragraph">
<p>The swagger module can read your code in order to create the swagger definition, but sometimes you need to help him by decorating your handlers.</p>
</div>
<div class="paragraph">
<p>For more information about decorators and other behaviours about swagger module, you can see the <a href="https://docs.nestjs.com/recipes/swagger">NestJS swagger documentation page</a></p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
the OpenAPI specification that this module supports is v2.0. The OpenAPI v3.0 is not available yet by using this module.
</td>
</tr>
</tbody></table>
</div>
<!-- toc disabled -->
</div>
<div class="sect2">
<h3 id="guides-typeorm.asciidoc">34.8. TypeORM</h3>
<div class="paragraph">
<p>TypeORM is the default ORM provided by devon4node. It supports MySQL, MariaDB, Postgres, CockroachDB, SQLite, Microsoft SQL Server, Oracle, sql.js relational dabases and also supports MongoDB NoSQL database.</p>
</div>
<div class="paragraph">
<p>Add TypeORM support to a devon4node application is very easy: you only need to execute the command <code>nest g -c @devon4node/schematics typeorm</code> and it will add all required dependencies to the project and also imports the @nestjs/typeorm module.</p>
</div>
<div class="paragraph">
<p>For more information about TypeORM and the integration with NestJS you can visit <a href="https://typeorm.io">TypeORM webpage</a>, <a href="https://github.com/typeorm/typeorm">TypeORM GitHub repository</a> and <a href="https://docs.nestjs.com/recipes/sql-typeorm">NestJS TypeORM documentation page</a></p>
</div>
<div class="sect3">
<h4 id="guides-typeorm.asciidoc_configuration">34.8.1. Configuration</h4>
<div class="paragraph">
<p>When you have the configuration module, the typeorm generator will add one property in order to be able to configure the database depending on the environment. Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-typescript" data-lang="typescript">database: {
  type: &apos;sqlite&apos;,
  database: &apos;:memory:&apos;,
  synchronize: false,
  migrationsRun: true,
  logging: true,
  entities: [&apos;dist/**/*.entity.js&apos;],
  migrations: [&apos;dist/migration/**/*.js&apos;],
  subscribers: [&apos;dist/subscriber/**/*.js&apos;],
  cli: {
    entitiesDir: &apos;src/entity&apos;,
    migrationsDir: &apos;src/migration&apos;,
    subscribersDir: &apos;src/subscriber&apos;,
  },
},</code></pre>
</div>
</div>
<div class="paragraph">
<p>This object is a TypeORM ConnectionOptions. For fore information about it visit the <a href="https://typeorm.io/#/connection-options/">TypeORM Connection Options page</a>.</p>
</div>
<div class="paragraph">
<p>There is also a special case: the default configuration. As the devon4node CLI need the database configuration when you use the <code>devon4node db</code> command, we also provide the ormconfig.json file. In this file you must put the configuration for you local environment. In order to do not have duplicated the configuration for local environment, in the default config file the database property is setted like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-typescript" data-lang="typescript">database: require(&apos;../../ormconfig.json&apos;),</code></pre>
</div>
</div>
<div class="paragraph">
<p>So, you only need to maintain the ormconfig.json file for the local environment.</p>
</div>
</div>
<div class="sect3">
<h4 id="guides-typeorm.asciidoc_entity">34.8.2. Entity</h4>
<div class="paragraph">
<p>Entity is a class that maps to a database table. The devon4node schematics has a generator to create new entities. You only need to execute the command <code>nest g -c @devon4node/schematics entity &lt;entity-name&gt;</code> and it generate the entity.</p>
</div>
<div class="paragraph">
<p>In the entity, you must define all columns, relations, primary keys of your database table. By default, devon4node provides a class named <code>BaseEntity</code>. All entities created with the devon4node schematics will extends the <code>BaseEntity</code>. This entity provides you some common columns:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>id: the primary key of you table</p>
</li>
<li>
<p>version: the version of the entry (used for auditing purposes)</p>
</li>
<li>
<p>createdAt: creation date of the entry (used for auditing purposes)</p>
</li>
<li>
<p>updatedAt: last update date of the entry (used for auditing purposes)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For more information about Entities, please visit the <a href="https://typeorm.io/#/entities">TypeORM entities page</a></p>
</div>
</div>
<div class="sect3">
<h4 id="guides-typeorm.asciidoc_repository">34.8.3. Repository</h4>
<div class="paragraph">
<p>With repositories, you can manage (insert, update, delete, load, etc.) a concrete entity. Using this pattern, we have separated the data (Entities) from the methods to manage it (Repositories).</p>
</div>
<div class="paragraph">
<p>To use a repository you only need to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Import it in the module as follows:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-typescript" data-lang="typescript">@Module({
  imports: [TypeOrmModule.forFeature([Employee])],
})</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
if you generate the entities with the devon4node schematic, this step is not neccesary, devon4node schematic will do it for you.
</td>
</tr>
</tbody></table>
</div>
</li>
<li>
<p>Inject the repository as dependency in your service:</p>
<div class="listingblock">
<div class="content">
<pre>constructor(@InjectRepository(Employee) employeeRepository: Repository&lt;Employee&gt;) {}</pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can see more details in the <a href="https://docs.nestjs.com/techniques/database">NestJS database</a> and <a href="https://docs.nestjs.com/recipes/sql-typeorm">NestJS TypeORM</a> documentation pages.</p>
</div>
<!-- toc disabled -->
</div>
</div>
<div class="sect2">
<h3 id="guides-serializer.asciidoc">34.9. Serializer</h3>
<div class="paragraph">
<p>Serialization is the process of translating data structures or object state into a format that can be transmitted across network and reconstructed later.</p>
</div>
<div class="paragraph">
<p>NestJS by default serialize all data to JSON (JSON.stringify). Sometimes this is not enough. In some situations you need to exclude some property (e.g password). Instead doing it manually, devon4node provides an interceptor (ClassSerializerInterceptor) that will do it for you. You only need to return a class instance as always and the interceptor will transform those class to the expected data.</p>
</div>
<div class="paragraph">
<p>The <code>ClassSerializerInterceptor</code> takes the <a href="https://github.com/typestack/class-transformer">class-transformer</a> decorators in order to know how to transform the class and then send the result to the client.</p>
</div>
<div class="paragraph">
<p>Some of class-transformer decorators are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Expose</p>
</li>
<li>
<p>Exclude</p>
</li>
<li>
<p>Type</p>
</li>
<li>
<p>Transform</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>And methods to transform data:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>plainToClass</p>
</li>
<li>
<p>plainToClassFromExist</p>
</li>
<li>
<p>classToPlain</p>
</li>
<li>
<p>classToClass</p>
</li>
<li>
<p>serialize</p>
</li>
<li>
<p>deserialize</p>
</li>
<li>
<p>deserializeArray</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>See the <a href="https://github.com/typestack/class-transformer">class-transformer</a> page for more information.</p>
</div>
<div class="paragraph">
<p>See <a href="https://docs.nestjs.com/techniques/serialization">NestJS serialization page</a> for more information about <code>ClassSerializerInterceptor</code>.</p>
</div>
<!-- toc disabled -->
</div>
<div class="sect2">
<h3 id="guides-validation.asciidoc">34.10. Validation</h3>
<div class="paragraph">
<p>To be sure that your application will works well, you must validate any input data. devon4node by default provides a <code>ValidationPipe</code>. This <code>ValidationPipe</code> is the responsible of validate the request input and, if the input do not pass the validation process, it returns a <code>400 Bad Request</code> error.</p>
</div>
<div class="sect3">
<h4 id="guides-validation.asciidoc_defining-validators">34.10.1. Defining Validators</h4>
<div class="paragraph">
<p>The <code>ValidationPipe</code> needs to know how to validate the input. For that purpose we use the <code>class-validator</code> package. This package allows you to define the validation of a class by using decorators.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-typescript" data-lang="typescript">export class Coffee {
  @IsDefined()
  @IsString()
  @MaxLength(255)
  name: string;

  @IsDefined()
  @IsString()
  @MaxLength(25)
  type: string;

  @IsDefined()
  @IsNumber()
  quantity: number;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>As you can see in the previous example, we used some decorators in order to define the validators for every property of the Coffee class. You can find all decorators in the <a href="https://github.com/typestack/class-validator">class-validator github repository</a>.</p>
</div>
<div class="paragraph">
<p>Now, when you want to receive a Coffee as input in some endpoint, it will execute the validations before executing the handler function.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
In order to be able to use the class-validator package, you must use classes instead of interfaces. As you know interfaces disappear at compiling time, and class-validator need to know the metadata of the properties in order to be able to validate.
</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The <code>ValidationPipe</code> only works if you put a specific type in the handler definition. For example, if you define a handler like <code>getCoffee(@Body() coffee: any): Coffee {}</code> the ValidationPipe will not do anything. You must specify the type of the input: <code>getCoffee(@Body() coffee: Coffee): Coffee {}</code>
</td>
</tr>
</tbody></table>
</div>
<!-- toc disabled -->
</div>
</div>
<div class="sect2">
<h3 id="guides-logger.asciidoc">34.11. Logger</h3>
<div class="paragraph">
<p>When you create a new devon4node application, it already has a logger: <code>src/app/shared/logger/winston.logger.ts</code>. This logger provide the methods <code>log</code>, <code>error</code> and <code>warn</code>. All of those methods will write a log message, but with a different log level.</p>
</div>
<div class="paragraph">
<p>The winston logger has two transports: one to log everything inside the file logs/general.log and the other to log only the error logs inside the file logs/error.log. In addition, it uses the default NestJS logger in order to show the logs in the console.</p>
</div>
<div class="paragraph">
<p>As you can see it is a simple example about how to use logger in a devon4node application. It will be update to a complex one in the next versions.</p>
</div>
<div class="sect3">
<h4 id="guides-logger.asciidoc_how-to-use-logger">34.11.1. How to use logger</h4>
<div class="paragraph">
<p>In order to use the logger you only need to inject the logger as a dependency:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-typescript" data-lang="typescript">constructor(logger: WinstonLogger){}</code></pre>
</div>
</div>
<div class="paragraph">
<p>and then use it</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-typescript" data-lang="typescript">async getAll() {
  this.service.getAll();
  this.logger.log(&apos;Returning all data&apos;);
}</code></pre>
</div>
</div>
<!-- toc disabled -->
</div>
</div>
<div class="sect2">
<h3 id="guides-mailer.asciidoc">34.12. Mailer Module</h3>
<div class="paragraph">
<p>This module enables you to send emails in devon4node. It also provides a template engine using Handlebars.</p>
</div>
<div class="paragraph">
<p>It is a NestJS module that inject into your application a MailerService, which is the responsible to send the emails using the nodemailer library.</p>
</div>
<div class="sect3">
<h4 id="guides-mailer.asciidoc_installing">34.12.1. Installing</h4>
<div class="paragraph">
<p>Execute the following command in a devon4node project:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">yarn add @devon4node/mailer</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="guides-mailer.asciidoc_configuring">34.12.2. Configuring</h4>
<div class="paragraph">
<p>To configure the mailer module, you only need to import it in your application into another module. Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-typescript" data-lang="typescript">@Module({
  ...
  imports: [
    MailerModule.forRoot(),
  ],
  ...
})</code></pre>
</div>
</div>
<div class="paragraph">
<p>Your must pass the configuration using the forRoot or forRootAsync methods.</p>
</div>
<div class="sect4">
<h5 id="guides-mailer.asciidoc_forroot">forRoot()</h5>
<div class="paragraph">
<p>The forRoot method receives an MailerModuleOptions object as parameter. It configures the MailerModule using the input MailerModuleOptions object.</p>
</div>
<div class="paragraph">
<p>The structure of MailerModuleOptions is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-typescript" data-lang="typescript">{
  hbsOptions?: {
    templatesDir: string;
    extension?: string;
    partialsDir?: string;
    helpers?: IHelperFunction[];
    compilerOptions?: ICompileOptions;
  },
  mailOptions?: nodemailerSmtpTransportOptions;
  emailFrom: string;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here, you need to specify the <a href="https://handlebarsjs.com/reference.html">Handlebars compile options</a>, the <a href="https://nodemailer.com/smtp">nodemailer transport options</a> and the email address which will send the emails.
Then, you need to call to forRoot function in the module imports. Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-typescript" data-lang="typescript">@Module({
  ...
  imports: [
    MailerModule.forRoot({
      mailOptions: {
        host: &apos;localhost&apos;,
        port: 1025,
        secure: false,
        tls: {
          rejectUnauthorized: false,
        },
      },
      emailFrom: &apos;noreply@capgemini.com&apos;,
      hbsOptions: {
        templatesDir: join(__dirname, &apos;../..&apos;, &apos;templates/views&apos;),
        partialsDir: join(__dirname, &apos;../..&apos;, &apos;templates/partials&apos;),
        helpers: [{
          name: &apos;fullname&apos;,
          func: person =&gt; `${person.name} ${person.surname}`,s
        }],
      },
    }),
  ...
})</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="guides-mailer.asciidoc_forrootasync">forRootAsync()</h5>
<div class="paragraph">
<p>The method forRootAsync enables you to get the mailer configuration in a asynchronous way. It is useful when you need to get the configuration using, for example, a service (e.g. ConfigurationService).</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-typescript" data-lang="typescript">@Module({
  ...
  imports: [
    MailerModule.forRootAsync({
      imports: [ConfigurationModule],
      useFactory: (config: ConfigurationService) =&gt; {
        return config.mailerConfig;
      },
      inject: [ConfigurationService],
    }),
  ...
})</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example, we use the ConfigurationService in order to get the MailerModuleOptions (the same as forRoot)</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="guides-mailer.asciidoc_usage">34.12.3. Usage</h4>
<div class="paragraph">
<p>In order to use, you only need to inject using the dependency injection the MailerService.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-typescript" data-lang="typescript">@Injectable()
export class CatsService {
  constructor(private readonly mailer: MailerService) {}
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then, you only need to use the methods provided by the MailerService in your service. Take into account that you can inject it in every place that support NestJS dependency injection.</p>
</div>
<div class="sect4">
<h5 id="guides-mailer.asciidoc_mailerservice-methods">MailerService methods</h5>
<div class="sect5">
<h6 id="guides-mailer.asciidoc_sendplainmail">sendPlainMail</h6>
<div class="paragraph">
<p>The method sendPlainMail receive a string sends a email.</p>
</div>
<div class="paragraph">
<p>The method signatures are:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-typescript" data-lang="typescript">sendPlainMail(emailOptions: SendMailOptions): Promise&lt;SentMessageInfo&gt;;
sendPlainMail(to: string, subject: string, mail: string): Promise&lt;SentMessageInfo&gt;;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Examples:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-typescript" data-lang="typescript">this.mailer.sendPlainMail({
  to: &apos;example@example.com&apos;,
  subject: &apos;This is a subject&apos;,
  html: &apos;&lt;h1&gt;Hello world&lt;/h1&gt;&apos;
});
this.mailer.sendPlainMail(&apos;example@example.com&apos;, &apos;This is a subject&apos;, &apos;&lt;h1&gt;Hello world&lt;/h1&gt;&apos;);</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="guides-mailer.asciidoc_sendtemplatemail">sendTemplateMail</h6>
<div class="paragraph">
<p>The method sendTemplateMail sends a email based on a Handlebars template. The templates are registered using the templatesDir option or using the addTemplate method.
The template name is the name of the template (without extension) or the first parameter of the method addTemplate.</p>
</div>
<div class="paragraph">
<p>The method signatures are:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-typescript" data-lang="typescript">sendTemplateMail(emailOptions: SendMailOptions, templateName: string, emailData: any, hbsOptions?: RuntimeOptions): Promise&lt;SentMessageInfo&gt;;
sendTemplateMail(to: string, subject: string, templateName: string, emailData: any, hbsOptions?: RuntimeOptions): Promise&lt;SentMessageInfo&gt;;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Examples:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-typescript" data-lang="typescript">this.mailer.sendTemplateMail({
  to: &apos;example@example.com&apos;,
  subject: &apos;This is a subject&apos;,
  html: &apos;&lt;h1&gt;Hello world&lt;/h1&gt;&apos;
}, &apos;template1&apos;, { person: {name: &apos;Dario&apos;, surname: &apos;Rodriguez&apos;}});
this.mailer.sendTemplateMail(&apos;example@example.com&apos;, &apos;This is a subject&apos;, &apos;template1&apos;, { person: {name: &apos;Dario&apos;, surname: &apos;Rodriguez&apos;}});</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="guides-mailer.asciidoc_addtemplate">addTemplate</h6>
<div class="paragraph">
<p>Adds a new template to the MailerService.</p>
</div>
<div class="paragraph">
<p>Method signature:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-typescript" data-lang="typescript">addTemplate(name: string, template: string, options?: CompileOptions): void;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-typescript" data-lang="typescript">this.mailer.addTemplate(&apos;newTemplate&apos;, &apos;&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;{{&gt;partial1}}&lt;/body&gt;&lt;/html&gt;&apos;)</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="guides-mailer.asciidoc_registerpartial">registerPartial</h6>
<div class="paragraph">
<p>Register a new partial in Handlebars.</p>
</div>
<div class="paragraph">
<p>Method signature:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-typescript" data-lang="typescript">registerPartial(name: string, partial: Handlebars.Template&lt;any&gt;): void;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-typescript" data-lang="typescript">this.mailer.registerPartial(&apos;partial&apos;, &apos;&lt;h1&gt;Hello World&lt;/h1&gt;&apos;)</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="guides-mailer.asciidoc_registerhelper">registerHelper</h6>
<div class="paragraph">
<p>Register a new helper in Handlebars.</p>
</div>
<div class="paragraph">
<p>Method signature:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-typescript" data-lang="typescript">registerHelper(name: string, helper: Handlebars.HelperDelegate): void;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-typescript" data-lang="typescript">this.mailer.registerHelper(&apos;fullname&apos;, person =&gt; `${person.name} ${person.surname}`)</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="guides-mailer.asciidoc_handlebars-templates">34.12.4. Handlebars templates</h4>
<div class="paragraph">
<p>As mentioned above, this module allow you to use Handlebars as template engine, but it is optional. If you do not need the Handlebars, you just need to keep the hbsOptions undefined.</p>
</div>
<div class="paragraph">
<p>In order to get the templates form the file system, you can specify the template folder, the partials folder and the helpers.
At the moment of module initialization, it will read the content of the template folder, and will register every file with the name (without extension) and the content as Handlebars template. It will do the same for the partials.</p>
</div>
<div class="paragraph">
<p>You can specify the extension of template files using the <code>extension</code> parameter. The default value is <code>.handlebars</code></p>
</div>
</div>
<div class="sect3">
<h4 id="guides-mailer.asciidoc_local-development">34.12.5. Local development</h4>
<div class="paragraph">
<p>If you want to work with this module but you don&#x2019;t have a SMTP server, you can use the <code>streamTransport</code>. Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-typescript" data-lang="typescript">{
  mailOptions: {
    streamTransport: true,
    newline: &apos;windows&apos;,
  },
  emailFrom: ...
  hbsOptions: ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then, you need to get the sendPlainMail or sendTemplateMail result, and print the email to the standard output (STDOUT). Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-typescript" data-lang="typescript">const mail = await this.mailer.sendTemplateMail(...);

mail.message.pipe(process.stdout);</code></pre>
</div>
</div>
<!-- toc disabled -->
</div>
</div>
<div class="sect2">
<h3 id="guides-eslint-sonarqube-config.asciidoc">34.13. Importing your ESLint reports into SonarQube</h3>
<div class="paragraph">
<p>This guide covers the import of ESLint reports into SonarQube instances in CI environments, as this is the recommended way of using ESLint and SonarQube for devon4node projects. The prerequisites for this process are a CI environment, preferably a <a href="https://github.com/devonfw/production-line">Production Line</a> instance, and the <a href="https://eslint.org/docs/user-guide/command-line-interface">ESLint CLI</a>, which is already included when generating a new devon4node project.</p>
</div>
<div class="sect4">
<h5 id="guides-eslint-sonarqube-config.asciidoc_configuring-the-eslint-analysis">Configuring the ESLint analysis</h5>
<div class="paragraph">
<p>You can configure the ESLint analysis parameters in the <code>.eslintrc.js</code> file inside the top-level directory of your project. If you created your node project using the devon4node application schematic, this file will already exist. If you want to make further adjustments to it, have a look at the <a href="https://eslint.org/docs/user-guide/configuring">ESLint documentation</a>.</p>
</div>
<div class="paragraph">
<p>The ESLint analysis script <code>lint</code> is already configured in the <code>scripts</code> part of your <code>package.json</code>. Simply add <code>-f json &gt; report.json</code>, so that the output of the analysis is saved in a .json file. Additional information to customization options for the ESLint CLI can be found <a href="https://eslint.org/docs/user-guide/command-line-interface#options">here</a>.</p>
</div>
<div class="paragraph">
<p>To run the analysis, execute the script with <code>npm run lint</code> inside the base directory of your project.</p>
</div>
</div>
<div class="sect4">
<h5 id="guides-eslint-sonarqube-config.asciidoc_configuring-sonarqube">Configuring SonarQube</h5>
<div class="paragraph">
<p>If you haven&#x2019;t already generated your CICD-related files, follow the tutorial on the <a href="https://github.com/devonfw/cicdgen/wiki/devon4node-schematic">devon4node schematic</a> of our CICDGEN project, as you will need a Jenkinsfile configured in your project to proceed.</p>
</div>
<div class="paragraph">
<p>Inside the script for the SonarQube code analysis in your Jenkinsfile, add the parameter <code>-Dsonar.eslint.reportPaths=report.json</code>. Now, whenever a SonarQube analysis is triggered by your CI environment, the generated report will be loaded into your SonarQube instance.
To avoid duplicated issues, you can associate an empty TypeScript quality profile with your project in its server configurations.</p>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph nav-footer">
<p>&#x2190;&#xA0;Previous:&#xA0;<a href="master-devon4node.asciidoc_layers.html">Layers</a>&#xA0;| &#x2191;&#xA0;Up:&#xA0;<a href="master-devon4node.asciidoc.html">devon4node</a>&#xA0;| &#x2302;&#xA0;Home:&#xA0;<a href="master.html">devonfw guide</a>&#xA0;| Next:&#xA0;<a href="master-devon4node.asciidoc_devon4node-applications.html">devon4node applications</a>&#xA0;&#x2192;</p>
</div>
</div>
<div id="footer" class="footer">
<div class="openblock footerLinks">
<div class="content">
<div class="dlist linklist">
<dl>
<dt class="hdlist1">About</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="/website/pages/docs/getting-started.asciidoc_introduction.html">About devonfw</a></p>
</li>
<li>
<p><a href="/website/pages/docs/getting-started.asciidoc_introduction.html#introduction-why-should-i-use-devonfw.asciidoc">Features</a></p>
</li>
<li>
<p><a href="/website/pages/docs/getting-started.asciidoc_further-information.html">Technology Stack</a></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="dlist linklist">
<dl>
<dt class="hdlist1">Explore</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="/website/pages/docs/getting-started.asciidoc.html">Getting started</a></p>
</li>
<li>
<p><a href="/website/pages/docs/devon4j.asciidoc_architecture.html">Architecture</a></p>
</li>
<li>
<p><a href="/website/pages/resources/resources.html">Resources</a></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="dlist linklist">
<dl>
<dt class="hdlist1">Docs</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="/website/pages/docs/devonfw-ide-introduction.asciidoc.html">User guide</a></p>
</li>
<li>
<p><a href="/website/pages/docs/master-release-notes.asciidoc.html">Releases information</a></p>
</li>
<li>
<p><a href="/website/pages/docs/master.html">Wiki</a></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="dlist linklist">
<dl>
<dt class="hdlist1">Community</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/orgs/devonfw/people">Contributors</a></p>
</li>
<li>
<p><a href="https://github.com/devonfw/devonfw.github.io/blob/develop/README.asciidoc">Website Contribution</a></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="ulist footerFooter">
<ul>
<li>
<p><a href="https://devonfw.com/website/pages/docs/devonfw-ide-support.asciidoc.html#LICENSE.asciidoc">Terms of Use</a></p>
</li>
<li>
<p><a href="https://github.com/devonfw">Support</a></p>
</li>
</ul>
</div>
</div>
    <script type="module">
      import { UtilsModule } from '/website/shared/utils.js';
      import { HeaderModule } from '/website/components/header/header.js';

      let searchData = { index: null, documents: null };
      UtilsModule.loadIndex(searchData);

      $(window).on('load', function() {
        const queryFun = () => {
          HeaderModule.queryFunction(searchData);
        };

        HeaderModule.searchOnClick(queryFun);
      });
    </script>
    <script>
      let bb = document.getElementById('menu-button');
      bb.addEventListener('click', function() {
        document.querySelector('.website-navbar ul').classList.toggle('visible');
        console.log(document.querySelector('.website-navbar ul'))
      })
    </script>
    <script type="module">
      import { EditLinksModule } from '/website/shared/editlinks.js';

      let alwaysVisible = true;
      if(document.location.pathname.endsWith("pages/welcome/welcome.html")) {
        alwaysVisible = false;
      }
      EditLinksModule.addEditLinks(alwaysVisible);
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
<div class="footnote"><sub>

Last updated 2021-06-30 12:27:46 UTC
</sub></div>


<script>
  if(!document.location.pathname.endsWith("pages/welcome/welcome.html")) {
    anchors.options.visible = 'always';
  }
  anchors.add();
</script>
<script>
  var internalUrls = ["https://cginternal.devonfw.com/websitesnippets/"];
  $(".internal").each(function(){
    internalUrls.forEach((internalUrl, index) => {
      $.ajax({url: internalUrl + $(this).text() + "/index.html" })
      .then(r => {
        var leftDiv = $('<div class="info"><span class="infoText">Internal</span><img class="infoImage" src="' + internalUrl + 'logo.png"/></div>');
        var rightFirstDiv = $('<div class="message">This is only visible inside of the corporate network.</div>');
        var rightLastDiv = $('<div class="content"></div>');
        rightLastDiv.html(r);
        var rightDiv = $('<div class="right"></div>');
        rightDiv.append(rightFirstDiv);
        rightDiv.append(rightLastDiv);
        $(this).html(leftDiv);
        $(this).append(rightDiv);
        $(this).addClass("internal-active");
        $(this).removeClass("internal");
      })
    });
	});
</script>

</body></html>